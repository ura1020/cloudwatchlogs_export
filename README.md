# CloudWatchLogs の S3 へのエクスポートツール

アカウントに紐づく全てのロググループを対象として、日時単位で出力します。<br>
シェル100%です。<br>
と言いましたが awscli が必要でした。<br>

## 概要
AWS上のあらゆるログは CloudWatchLogs に溜まっていきます。<br>
しかし、そこで分析・調査するには時間がかかりすぎます。<br>
1日分の分析が終わる前に次の1日がやってきます。やってられるかー！<br><br>
また日々たまり続けるログを CloudWatchLogs に置きっぱなしにするのはランニングコスト上も嬉しくありません。<br>
S3 にバックアップが取れる為、ロググループは定期削除を有効にしてメンテフリーと出来ます。

## S3 にエクスポートするメリット
- 分析の高速化
- ランニングコスト削減

## 使い方
1. 出力先S3バケット作成
1. policy.json を参考にS3バケットにパケットポリシー設定
1. sample.sh を環境に合わせて編集・設置
1. 日時で動くよう crontab などに設定

## 手動実行
```
# 前日分エクスポート
sh sample.sh

# 日付指定
sh sample.sh 2020-08-08
```
